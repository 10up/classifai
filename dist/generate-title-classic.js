(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var i in t)e.o(t,i)&&!e.o(a,i)&&Object.defineProperty(a,i,{enumerable:!0,get:t[i]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.i18n,t=window.wp.apiFetch;var i=e.n(t);const s=window.ClassifAI||{},n=(window.classifaiChatGPTData||{}).enabledFeatures.reduce(((e,a)=>({[a.feature]:a})),{});var l;(l=jQuery)(document).ready((()=>{n?.title&&function(){var e;let t=!1;l("<span />",{text:null!==(e=n?.title?.buttonText)&&void 0!==e?e:"",class:"classifai-openai__title-generate-btn--text"}).wrap('<div class="button" id="classifai-openai__title-generate-btn" />').parent().append(l("<span />",{class:"classifai-openai__title-generate-btn--spinner"})).appendTo("#titlewrap");const o=l("#post_ID").val(),c=()=>{l("#classifai-openai__results").removeClass("classifai-openai--fade-in").delay(300).fadeOut(0)};l(document).on("click","#classifai-openai__title-generate-btn",(()=>{if(t)return;l("#classifai-openai__results-content").html("");const e=l(".classifai-openai__title-generate-btn--text"),c=l(".classifai-openai__title-generate-btn--spinner");e.css("opacity","0"),c.show(),t=!0;const r=n.title?.path+o;i()({path:r}).then((i=>{e.css("opacity","1"),c.hide(),t=!1,i.forEach((e=>{l("<textarea>",{text:e}).wrap('<div class="classifai-openai__result-item" />').parent().append(l("<button />",{text:n.title.selectBtnText,type:"button",class:"button classifai-openai__select-title"})).appendTo("#classifai-openai__results-content")})),s?.opt_out_enabled_features?.includes("feature_title_generation")&&l("<a>",{text:(0,a.__)("Disable this ClassifAI feature","classifai"),href:s?.profile_url,target:"_blank",rel:"noopener noreferrer",class:"classifai-disable-feature-link"}).wrap('<div class="classifai-openai__result-disable-link" />').parent().appendTo("#classifai-openai__modal"),l("#classifai-openai__results").show().addClass("classifai-openai--fade-in")})).catch((a=>{e.css("opacity","1"),c.hide(),t=!1,l('<span class="error">').text(a?.message).wrap('<div class="classifai-openai__result-item" />').appendTo("#classifai-openai__results-content"),l("#classifai-openai__results").show().addClass("classifai-openai--fade-in")}))})),l(document).on("click","#classifai-openai__overlay",c),l(document).on("click","#classifai-openai__close-modal-button",c),l(document).on("click",".classifai-openai__select-title",(e=>{const a=l(e.target).closest(".classifai-openai__result-item").find("textarea"),t=function(){const e=window.tinymce&&window.tinymce.get("content");let a=!1;return wp.autosave?a=wp.autosave.server.postChanged():e&&(a=!e.isHidden()&&e.isDirty()),a}();l("#title").val(a.val()).trigger("input"),!t&&wp.autosave&&wp.autosave.server.triggerSave(),c()})),l("#classifai-openai__results").find("#classifai-openai__results-title").text(n.title.modalTitle)}()}))})();