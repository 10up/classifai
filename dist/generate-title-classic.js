(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var i in a)e.o(a,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:a[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,a=window.wp.apiFetch;var i=e.n(a);const s=window.ClassifAI||{},n=(window.classifaiChatGPTData||{}).enabledFeatures.reduce(((e,t)=>({[t.feature]:t})),{});var l;(l=jQuery)(document).ready((()=>{n?.title&&function(){var e;let a=!1;l("<span />",{text:null!==(e=n?.title?.buttonText)&&void 0!==e?e:"",class:"classifai-openai__title-generate-btn--text"}).wrap('<div class="button" id="classifai-openai__title-generate-btn" />').parent().append(l("<span />",{class:"classifai-openai__title-generate-btn--spinner"})).appendTo("#titlewrap");const o=l("#post_ID").val(),r=()=>{l("#classifai-openai__results").removeClass("classifai-openai--fade-in").delay(300).fadeOut(0)};l(document).on("click","#classifai-openai__title-generate-btn",(()=>{if(a)return;l("#classifai-openai__results-content").html("");const e=l(".classifai-openai__title-generate-btn--text"),r=l(".classifai-openai__title-generate-btn--spinner");e.css("opacity","0"),r.show(),a=!0;const c=n.title?.path+o;i()({path:c}).then((i=>{e.css("opacity","1"),r.hide(),a=!1,i.forEach((e=>{l("<textarea>",{text:e}).wrap('<div class="classifai-openai__result-item" />').parent().append(l("<button />",{text:n.title.selectBtnText,type:"button",class:"button classifai-openai__select-title"})).appendTo("#classifai-openai__results-content")})),s?.opt_out_enabled_features?.includes("title_generation")&&l("<a>",{text:(0,t.__)("Disable this ClassifAI feature","classifai"),href:s?.profile_url,target:"_blank",rel:"noopener noreferrer",class:"classifai-disable-feature-link"}).wrap('<div class="classifai-openai__result-disable-link" />').parent().appendTo("#classifai-openai__modal"),l("#classifai-openai__results").show().addClass("classifai-openai--fade-in")}))})),l(document).on("click","#classifai-openai__overlay",r),l(document).on("click","#classifai-openai__close-modal-button",r),l(document).on("click",".classifai-openai__select-title",(e=>{const t=l(e.target).closest(".classifai-openai__result-item").find("textarea"),a=function(){const e=window.tinymce&&window.tinymce.get("content");let t=!1;return wp.autosave?t=wp.autosave.server.postChanged():e&&(t=!e.isHidden()&&e.isDirty()),t}();l("#title").val(t.val()).trigger("input"),!a&&wp.autosave&&wp.autosave.server.triggerSave(),r()})),l("#classifai-openai__results").find("#classifai-openai__results-title").text(n.title.modalTitle)}()}))})();